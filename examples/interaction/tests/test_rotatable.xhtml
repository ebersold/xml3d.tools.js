<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:webgl="http://www.xml3d.org/2009/xml3d/webgl">
<head>
  <title>.rotatable() Test</title>
  <link rel="stylesheet" type="text/css" media="all" href="../../style/default.css" />
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script type="text/javascript" src="../../external/xml3d.js"></script>
  <script type="text/javascript" src="../../external/xml3d-tools.js"></script>
  <script type="text/javascript" src="../../../build/output/xml3d-motion.js"></script>
  <script type="text/javascript" src="../page.js" />

  <script type="text/javascript" src="test_rotatable.js"></script>
</head>

<body onload="initScene()">
<div id="overall">
    <div id="content">
    <h1>.rotatable() Test</h1>
    <div style="padding: 16px" >
      <div id="Xml3dWrapper" style="color: red" >
        <xml3d id="MyXml3d"
          xmlns="http://www.xml3d.org/2009/xml3d"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          webgl:showLog="false"
          activeView="#controller_view"
          pickableBackground="true"
          style="width:350px; height:350px;"
        >
          <view id="controller_view" position="0 0 10" />
          <light id="light1" intensity="10.8" global="false" />

          <defs>
            <transform id="trans1" />
            <transform id="trans2" translation="0 -2.5 0" />
            <transform id="transall" />
            
            <shader id="s_target" script="urn:xml3d:shader:phong">
              <float3 name="diffuseColor">0.9 0 0</float3>
              <float name="ambientIntensity">0.3</float>
              <float name="transparency">0</float>
              <float3 name="specularColor">0 0 0</float3>
              <float name="shininess">0.5</float>
              <float3 name="reflective">0 0 0</float3>
              <float3 name="emissiveColor">0 0 0</float3>
            </shader>
            
            <lightshader id="s_light" script="urn:xml3d:lightshader:point">
              <float3 name="intensity">0.7 0.7 0.7</float3>
              <float3 name="attenuation">1.0 0.01 0</float3>
            </lightshader>
            
            <transform id="t_light1" translation="0 0 5" />
            <transform id="t_light2" translation="0 0 -5" />
            <transform id="t_light3" translation="0 5 0" />
            <transform id="t_light4" translation="0 -5 0" />
            <transform id="t_light5" translation="5 0 0" />
            <transform id="t_light6" translation="-5 0 0" />
          </defs>
          
          <group transform="#t_light1">
            <light shader="#s_light"/>
          </group>
          <group transform="#t_light2">
            <light shader="#s_light"/>
          </group>
          <group transform="#t_light3">
            <light shader="#s_light"/>
          </group>
          <group transform="#t_light4">
            <light shader="#s_light"/>
          </group>
          <group transform="#t_light5">
            <light shader="#s_light"/>
          </group>
          <group transform="#t_light6">
            <light shader="#s_light"/>
          </group>

          <group id="group_all" shader="#s_target" transform="#transall">
            <group id="group1" transform="#trans1">
                <!-- mesh inserted by script -->               
            </group>
          </group>
        </xml3d>
      </div>
    </div>

    <div class="actions">
      <input type="button" value="Activate Trackball" id="toggletrackball" onclick="toggleTrackBall();" />
      <input type="button" value="Reset Rotation" onclick="resetRotation();" />
      <span style="margin-left: 10px;">axis restriction:
        <input type="radio" name="axisrestrict" 
               value="none" onclick="changeRestriction(null)"
               checked="true" />
            none&nbsp;&nbsp;
        <input type="radio" name="axisrestrict" 
               value="x" onclick="changeRestriction('x')" />
            x&nbsp;&nbsp;
        <input type="radio" name="axisrestrict" 
               value="y" onclick="changeRestriction('y')" />
            y&nbsp;&nbsp;
        <input type="radio" name="axisrestrict" 
               value="z" onclick="changeRestriction('z')" />
            z&nbsp;&nbsp;
      </span>
    </div> 
    <div class="message">
      <p>Upon activation the rotation of the rectangle can be controlled by dragging it.
      This is done using the jQuery plugin .rotatable().</p>


      <p>The status can be reviewed below.
        <ul>
          <li><b>Dragging:</b> whether .rotatable() reports that it
            is dragging and thus rotating.</li>
          <li><b>Rotation:</b> the rotation attribute of the target element's transform node.</li>
        </ul>
      </p>
    </div>

    <div class="message">Dragging: <span id="dragstatus">false</span></div>
    <div class="message">rotation: <span id="rotation">no dragging done yet</span></div>
  </div>
</div>
</body>
</html>
